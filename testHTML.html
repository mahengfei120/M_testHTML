<html>
	<head>
		<meta content="text/html; charset=UTF-8">
		<title>一个测试HTML的页面</title>
	</head>
	<body>
		<div class="getLocation">获取当前地理位置</div>
		<div class="location_str"></div>
	</body>
	<style>
		.getLocation {
			height: 44px;
			line-height: 44px;
			width: 200px;
			font-size: 14px;
			background: skyblue;
			border-radius: 5px;
		}
	</style>
</html>
<script type="text/javascript">
document.querySelector('.getLocation').addEventListener('click', function () {
	var options={
            enableHighAccuracy:true,
            maximunAge:1000,
            timeout:10000
    };
    if(window.navigator.geolocation){
        navigator.geolocation.getCurrentPosition(successCallback,errorCallback,options);
    }else{
        alert("你的浏览器不支持定位!");
    }
})

function successCallback(position){
    var output="";
    output +="Your position has bean located . \r\n";
    output+=" Latitude:"+position.coords.latitude+" ";
    output+=" Longitude:"+position.coords.longitude+" ";
    output+=" Accuracy :"+position.coords.accuracy +" meters";
    if(position.coords.latitude){
        output+=" Accuracy :"+position.coords.altitudeAccuracy +" meters";
    }
    if(position.coords.heading){
        output+=" Heading :"+position.coords.Heading +" meters";
    }
    if(position.coords.speed){
        output+=" Speed :"+position.coords.Speed +" m/s";
    }
    output+=" Time of Position "+position.timestamp +" m/s";
    alert(output);
	document.querySelector('.location_str').innerHTML = output
}


function errorCallback(error){
   switch(error.code){
   case error.PERMISSION_DENIED:
       alert("浏览器阻止了定位操作");
       break;
   case error.POSITION_UNAVAILABLE:
       alert("无法获得当前位置");
       break;
   case error.TIMEOUT:
       alert("定位超时");
       break;
       
   }
}
</script>
